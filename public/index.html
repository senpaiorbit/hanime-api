<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>hanime.tv Scraper API</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Serif+Display&display=swap" rel="stylesheet"/>
<style>
  :root {
    --gold: #f3c669;
    --gold-dim: #b89035;
    --bg: #1a1a1a;
    --surface: #242424;
    --surface2: #2e2e2e;
    --border: #383838;
    --text: #e8e8e8;
    --muted: #888;
    --red: #ff5252;
    --green: #69f0ae;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Space Mono', monospace;
    font-size: 13px;
    min-height: 100vh;
  }

  /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  header {
    border-bottom: 1px solid var(--border);
    padding: 24px 32px;
    display: flex;
    align-items: center;
    gap: 20px;
    position: sticky;
    top: 0;
    background: rgba(26,26,26,0.96);
    backdrop-filter: blur(10px);
    z-index: 100;
  }
  .logo {
    font-family: 'DM Serif Display', serif;
    font-size: 22px;
    color: var(--text);
    letter-spacing: -0.5px;
  }
  .logo span { color: var(--gold); }
  .badge {
    background: var(--gold);
    color: #111;
    font-size: 9px;
    font-weight: 700;
    padding: 3px 8px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }
  .status-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 6px var(--green);
    margin-left: auto;
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%,100% { opacity: 1; }
    50%      { opacity: 0.4; }
  }

  /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  main { display: flex; height: calc(100vh - 65px); }

  /* â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  aside {
    width: 240px;
    flex-shrink: 0;
    border-right: 1px solid var(--border);
    padding: 24px 16px;
    overflow-y: auto;
  }
  .sidebar-section { margin-bottom: 28px; }
  .sidebar-label {
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 10px;
    padding-left: 8px;
  }
  .endpoint-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 9px 10px;
    border: none;
    background: transparent;
    color: var(--muted);
    font-family: inherit;
    font-size: 12px;
    text-align: left;
    cursor: pointer;
    transition: all .15s;
    border-left: 2px solid transparent;
  }
  .endpoint-btn:hover { color: var(--text); background: var(--surface); }
  .endpoint-btn.active {
    color: var(--gold);
    border-left-color: var(--gold);
    background: rgba(243,198,105,0.06);
  }
  .method-tag {
    font-size: 9px;
    padding: 2px 6px;
    background: rgba(243,198,105,0.15);
    color: var(--gold);
    border-radius: 2px;
    flex-shrink: 0;
  }

  /* â”€â”€ Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  section.content {
    flex: 1;
    overflow-y: auto;
    padding: 28px 32px;
  }

  /* â”€â”€ URL Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .url-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 10px 16px;
    margin-bottom: 20px;
  }
  .url-bar .method { color: var(--gold); font-weight: 700; font-size: 11px; }
  .url-bar input {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text);
    font-family: inherit;
    font-size: 13px;
    outline: none;
  }
  .send-btn {
    background: var(--gold);
    color: #111;
    border: none;
    padding: 6px 18px;
    font-family: inherit;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    cursor: pointer;
    transition: opacity .15s;
  }
  .send-btn:hover { opacity: 0.85; }
  .send-btn:disabled { opacity: 0.4; cursor: not-allowed; }

  /* â”€â”€ Params â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .params-section { margin-bottom: 20px; }
  .params-title {
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 10px;
  }
  .param-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }
  .param-row label { color: var(--muted); width: 70px; flex-shrink: 0; }
  .param-row input {
    flex: 1;
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: inherit;
    font-size: 12px;
    padding: 6px 10px;
    outline: none;
    transition: border-color .15s;
  }
  .param-row input:focus { border-color: var(--gold-dim); }
  .param-row input::placeholder { color: #555; }

  /* â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .response-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
  }
  .response-title { font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
  .status-pill {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 2px;
    font-weight: 700;
  }
  .status-pill.ok  { background: rgba(105,240,174,.15); color: var(--green); }
  .status-pill.err { background: rgba(255,82,82,.15);   color: var(--red);   }
  .time-label { margin-left: auto; color: var(--muted); font-size: 11px; }

  pre#response-box {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 20px;
    overflow: auto;
    max-height: 480px;
    font-size: 12px;
    line-height: 1.7;
    color: #ccc;
    white-space: pre-wrap;
    word-break: break-all;
  }
  .placeholder-msg {
    color: var(--muted);
    font-size: 12px;
    padding: 40px 0;
    text-align: center;
  }

  /* â”€â”€ Cards Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 12px;
    margin-top: 20px;
  }
  .vid-card {
    background: var(--surface);
    border: 1px solid var(--border);
    overflow: hidden;
    transition: border-color .2s, transform .2s;
    cursor: pointer;
  }
  .vid-card:hover { border-color: var(--gold-dim); transform: translateY(-2px); }
  .vid-card img {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
    display: block;
    background: var(--surface2);
  }
  .vid-card .card-info { padding: 8px 10px; }
  .vid-card .card-name {
    font-size: 11px;
    color: var(--text);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .vid-card .card-views { font-size: 10px; color: var(--muted); margin-top: 4px; }

  /* â”€â”€ Tabs (sections) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tabs { display: flex; gap: 4px; margin-bottom: 16px; flex-wrap: wrap; }
  .tab-btn {
    padding: 5px 14px;
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: inherit;
    font-size: 11px;
    cursor: pointer;
    transition: all .15s;
  }
  .tab-btn:hover { color: var(--text); }
  .tab-btn.active { background: var(--gold); color: #111; border-color: var(--gold); font-weight: 700; }

  /* â”€â”€ Loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .spinner {
    width: 18px; height: 18px;
    border: 2px solid var(--border);
    border-top-color: var(--gold);
    border-radius: 50%;
    animation: spin .7s linear infinite;
    display: none;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* â”€â”€ JSON Highlighting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .json-key   { color: #82aaff; }
  .json-str   { color: #c3e88d; }
  .json-num   { color: #f78c6c; }
  .json-bool  { color: var(--gold); }
  .json-null  { color: var(--muted); }

  ::-webkit-scrollbar { width: 5px; height: 5px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); }
</style>
</head>
<body>

<header>
  <div class="logo">hanime<span>.</span>tv <span style="color:var(--muted);font-size:14px;font-family:'Space Mono'">scraper</span></div>
  <div class="badge">API</div>
  <div class="status-dot" title="Online"></div>
</header>

<main>
  <!-- Sidebar -->
  <aside>
    <div class="sidebar-section">
      <div class="sidebar-label">Endpoints</div>
      <button class="endpoint-btn active" data-ep="home" onclick="selectEndpoint('home',this)">
        <span class="method-tag">GET</span> /api/home
      </button>
      <button class="endpoint-btn" data-ep="trending" onclick="selectEndpoint('trending',this)">
        <span class="method-tag">GET</span> /api/trending
      </button>
      <button class="endpoint-btn" data-ep="search" onclick="selectEndpoint('search',this)">
        <span class="method-tag">GET</span> /api/search
      </button>
      <button class="endpoint-btn" data-ep="video" onclick="selectEndpoint('video',this)">
        <span class="method-tag">GET</span> /api/video
      </button>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-label">Quick Links</div>
      <button class="endpoint-btn" onclick="quickFetch('/api/home')">
        ğŸ  Home Sections
      </button>
      <button class="endpoint-btn" onclick="quickFetch('/api/trending')">
        ğŸ”¥ Trending Now
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <section class="content">

    <!-- URL Bar -->
    <div class="url-bar">
      <span class="method">GET</span>
      <input id="url-input" type="text" value="/api/home" spellcheck="false"/>
      <div class="spinner" id="spinner"></div>
      <button class="send-btn" id="send-btn" onclick="sendRequest()">SEND</button>
    </div>

    <!-- Params (shown contextually) -->
    <div class="params-section" id="params-search" style="display:none">
      <div class="params-title">Query Parameters</div>
      <div class="param-row">
        <label>q=</label>
        <input id="param-q" type="text" placeholder="search queryâ€¦" oninput="updateURL()"/>
      </div>
      <div class="param-row">
        <label>tags=</label>
        <input id="param-tags" type="text" placeholder="milf,anal (comma-separated)" oninput="updateURL()"/>
      </div>
    </div>

    <div class="params-section" id="params-video" style="display:none">
      <div class="params-title">Query Parameters</div>
      <div class="param-row">
        <label>slug=</label>
        <input id="param-slug" type="text" placeholder="e.g. natsu-to-hako-1" oninput="updateURL()"/>
      </div>
    </div>

    <!-- Response header -->
    <div class="response-header">
      <div class="response-title">Response</div>
      <span class="status-pill" id="status-pill" style="display:none"></span>
      <span class="time-label" id="time-label"></span>
    </div>

    <!-- Tabs (for home sections) -->
    <div class="tabs" id="section-tabs" style="display:none"></div>

    <!-- Card grid (for home/trending/search) -->
    <div class="cards-grid" id="cards-grid" style="display:none"></div>

    <!-- Raw JSON -->
    <pre id="response-box"><div class="placeholder-msg">â† Select an endpoint and press SEND</div></pre>

  </section>
</main>

<script>
// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const BASE = window.location.origin;
let currentEp  = 'home';
let lastData   = null;
let activeSection = null;

// â”€â”€ Endpoint â†’ URL mapping â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const EP_URLS = {
  home:     '/api/home',
  trending: '/api/trending',
  search:   '/api/search',
  video:    '/api/video',
};

function selectEndpoint(ep, btn) {
  currentEp = ep;
  document.querySelectorAll('.endpoint-btn[data-ep]').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');

  document.getElementById('params-search').style.display = ep === 'search' ? 'block' : 'none';
  document.getElementById('params-video').style.display  = ep === 'video'  ? 'block' : 'none';

  document.getElementById('url-input').value = EP_URLS[ep];
  updateURL();
  clearResponse();
}

function updateURL() {
  const ep = currentEp;
  let url  = EP_URLS[ep];
  if (ep === 'search') {
    const q    = document.getElementById('param-q').value.trim();
    const tags = document.getElementById('param-tags').value.trim();
    const params = new URLSearchParams();
    if (q)    params.set('q', q);
    if (tags) params.set('tags', tags);
    if (params.toString()) url += '?' + params.toString();
  } else if (ep === 'video') {
    const slug = document.getElementById('param-slug').value.trim();
    if (slug) url += '?slug=' + encodeURIComponent(slug);
  }
  document.getElementById('url-input').value = url;
}

function quickFetch(url) {
  document.getElementById('url-input').value = url;
  sendRequest();
}

// â”€â”€ Send Request â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function sendRequest() {
  const url = document.getElementById('url-input').value.trim();
  if (!url) return;

  const btn     = document.getElementById('send-btn');
  const spinner = document.getElementById('spinner');

  btn.disabled     = true;
  spinner.style.display = 'block';

  clearResponse();

  const t0 = performance.now();
  try {
    const res = await fetch(url);
    const ms  = Math.round(performance.now() - t0);
    const json = await res.json();

    lastData = json;
    showStatus(res.status, ms);
    renderResponse(json, res.status);
  } catch (err) {
    showStatus(0, 0);
    document.getElementById('response-box').textContent = '// Network error: ' + err.message;
  } finally {
    btn.disabled          = false;
    spinner.style.display = 'none';
  }
}

function showStatus(code, ms) {
  const pill = document.getElementById('status-pill');
  pill.style.display = 'inline-block';
  pill.textContent   = code || 'ERR';
  pill.className     = 'status-pill ' + (code >= 200 && code < 300 ? 'ok' : 'err');
  document.getElementById('time-label').textContent = ms ? `${ms} ms` : '';
}

function clearResponse() {
  document.getElementById('response-box').innerHTML = '<div class="placeholder-msg">Loadingâ€¦</div>';
  document.getElementById('cards-grid').style.display  = 'none';
  document.getElementById('section-tabs').style.display = 'none';
  document.getElementById('cards-grid').innerHTML = '';
  document.getElementById('section-tabs').innerHTML = '';
  document.getElementById('status-pill').style.display = 'none';
  document.getElementById('time-label').textContent = '';
}

// â”€â”€ Render Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderResponse(data, status) {
  document.getElementById('response-box').innerHTML = syntaxHighlight(JSON.stringify(data, null, 2));

  // Home sections â†’ tabs + cards
  if (data.ok && data.sections) {
    const sections = data.sections;
    const keys = Object.keys(sections);
    if (keys.length) {
      renderSectionTabs(keys, sections);
    }
    return;
  }

  // Trending / Search results â†’ cards
  if (data.ok && Array.isArray(data.results) && data.results.length) {
    renderCards(data.results);
    return;
  }

  // Single video
  if (data.ok && data.video) {
    renderCards([data.video]);
  }
}

function renderSectionTabs(keys, sections) {
  const tabsEl = document.getElementById('section-tabs');
  tabsEl.style.display = 'flex';
  tabsEl.innerHTML = keys.map((k, i) =>
    `<button class="tab-btn ${i===0?'active':''}" onclick="showSection('${k}',this)">${k}</button>`
  ).join('');
  showSection(keys[0], tabsEl.querySelector('.tab-btn'));
  activeSection = sections;
}

function showSection(name, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderCards(activeSection[name] || []);
}

function renderCards(videos) {
  const grid = document.getElementById('cards-grid');
  grid.style.display = 'grid';
  grid.innerHTML = videos.map(v => `
    <div class="vid-card" onclick="loadVideo('${v.slug||''}')">
      <img src="${v.cover_url||''}" alt="${escHtml(v.name||'')}" loading="lazy"
           onerror="this.style.background='#333';this.removeAttribute('src')"/>
      <div class="card-info">
        <div class="card-name">${escHtml(v.name||v.slug||'')}</div>
        <div class="card-views">ğŸ‘ ${(v.views||0).toLocaleString()}</div>
      </div>
    </div>
  `).join('');
}

function loadVideo(slug) {
  if (!slug) return;
  selectEndpoint('video', document.querySelector('[data-ep="video"]'));
  document.getElementById('param-slug').value = slug;
  updateURL();
  sendRequest();
}

// â”€â”€ JSON Syntax Highlighter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function syntaxHighlight(json) {
  return json.replace(
    /("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,
    match => {
      let cls = 'json-num';
      if (/^"/.test(match)) {
        cls = /:$/.test(match) ? 'json-key' : 'json-str';
      } else if (/true|false/.test(match)) {
        cls = 'json-bool';
      } else if (/null/.test(match)) {
        cls = 'json-null';
      }
      return `<span class="${cls}">${match}</span>`;
    }
  );
}

function escHtml(str) {
  return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// â”€â”€ URL bar enter key â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('url-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') sendRequest();
});
</script>
</body>
</html>
